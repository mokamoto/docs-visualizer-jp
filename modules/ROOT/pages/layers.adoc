= Anypoint Visualizer でのレイヤの使用
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

Anypoint Vizualizer でレイヤを操作します。

== API、アプリケーション、またはプロキシのレイヤへの追加

レイヤにノードを分類する方法は 2 つあります。アプリケーションのプロパティファイルを使用するか、UI を使用します。

=== プロパティを使用したレイヤの設定
レイヤへのノードの分類を自動化するには、アプリケーションのプロパティファイルで `anypoint.platform.visualizer.layer=<name>` プロパティを設定します。

このプロパティを使用する場合、ノードは自動的に指定したレイヤに表示されます。レイヤが存在しない場合は自動的に作成されます。Runtime Manager UI を使用してノードをレイヤに再割り当てできます。

[メモ]
スタンドアロン Mule ランタイムエンジンにリリースされたアプリケーションの場合、ランタイムのプロパティを使用して設定されたレイヤ名に含めることができるのは英数字のみです。サポートされていない文字は `_` で置き換えられます。

== UI を使用したレイヤの設定

Runtime Manager UI または API を使用して、リリース時にレイヤを設定できます。デフォルトでは、Anypoint Visualizer を使用して環境を表示するときに、アプリケーション内のどのノードもレイヤに割り当てられていません。ノードを既存のレイヤに割り当てることができます。次の手順は、ノードのレイヤを変更する場合にも適用されます。

. レイヤに追加するアプリケーションノードを選択します。 +
Shift キーを押しながら複数のノードを選択すると、一度に選択したすべてのノードにレイヤを適用できます。 +
+
_結果_: 次の画像のように、ノードの *[Customization (カスタマイズ)]* パネルがパネルの右側に表示されます。
+
image::select-node.png[ノードの選択]

. 次の画像のように、*[Customization (カスタマイズ)]* パネルで *[Layer (レイヤ)]* の横にあるドロップダウンリストを展開します。
+
image::select-layer.png[レイヤの選択]

. ドロップダウンリストから、目的のレイヤを選択します。

_結果_: 次の画像のように、選択したノードがレイヤ内に表示されます。

image::select-layer-result.png[レイヤ内のノード]

== 新規レイヤの作成

Anypoint Visualizer によって提供されるデフォルトのレイヤに加えて、アプリケーションネットワークのビューをカスタマイズするための新規レイヤを作成できます。

. 新規レイヤに追加するノードを選択します。
. *[Customization (カスタマイズ)]* パネルのドロップダウンリストから、*[New Layer (新規レイヤ)]* を選択します。
. ダイアログボックスにレイヤの名前を入力し、*Create Layer (レイヤを作成)* をクリックします。 +

_結果_: ノードが新規レイヤに表示されます。必要に応じて、新規レイヤにノードを追加できます。


== レイヤの削除

必要に応じて、Anypoint Visualizer からレイヤを削除できます。レイヤを削除してもノードは削除されません。

. Visualizer の表示中に、レイヤの内側をクリックします。レイヤ内のノードはクリックしないでください。
. *Details (詳細)* パネルの上にある *[Delete Layer (レイヤを削除)]* アイコンをクリックします。
+
image::delete-layer.png[]
. *[Delete Layer (レイヤを削除)]* をクリックして削除を確定します。

_結果_: Anypoint Visualizer によって自動的にネットワーク表示が調整されます。削除されたレイヤに含まれていたノードは、レイヤの割り当てがなくなります。

== レイヤの並び替え
Anypoint Visualizer からレイヤを並び替えることができます。

. Visualizer の表示中に、レイヤの内側をクリックします。レイヤ内のノードはクリックしないでください。
. *Details (詳細)*  パネルの矢印を使用して、他のレイヤに対してレイヤを上下に移動します。

== 関連情報

* xref:view.adoc[Anypoint Visualizer でのアプリケーション情報の表示]
* xref:use-tags-in-visualizer.adoc[Anypoint Visualizer でのタグの使用]